<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    var s = [];
    var arr = s;
    for (var i = 0; i < 3; i++) {
      var pusher = {
          value: 'item' + i
        },
        tmp;
      if (i !== 2) {
        tmp = [];
        pusher.children = tmp;
      }
      arr.push(pusher);
      arr = tmp;
    }
    console.log('s', s[0]);

    // 0: pusher={value: item0} / tmp=[] / pusher={value: item0,children: []} / arr=[{value: item0,children: []}] / arr = []
    // 1: pusher={value: item1} / tmp = []

  </script>
</body>

</html>